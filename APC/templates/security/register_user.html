{% from 'security/_macros.html' import render_field_with_errors, render_image, render_shortfield_with_errors, render_field %}
{% extends 'site-templates/header2.html' %}


        {% block body %}
        <div class="card-content transition-fade" id='swup'>
            <div class="image-logo text-center">
                <img src="/static/images/logo.png" alt="Apc Logo" width="100" height="100">
            </div>
            <h1 class='text-center'>APC MEMBERSHIP REGISTER</h1>

            <form action="/register/" method='POST' name='register_user_form' enctype="multipart/form-data">
                {{ register_user_form.hidden_tag() }}
                {{ render_shortfield_with_errors(register_user_form.firstname, register_user_form.lastname) }}
                
                {{ render_field_with_errors(register_user_form.email) }}
                {{ render_shortfield_with_errors(register_user_form.sex, register_user_form.country) }}
                {{ render_shortfield_with_errors(register_user_form.city, register_user_form.state) }}
                {{ render_field_with_errors(register_user_form.lga) }}
                {{ render_field_with_errors(register_user_form.ward) }}
                {{ render_field_with_errors(register_user_form.phone) }}
                {{ render_field_with_errors(register_user_form.password) }}
                {% if register_user_form.password_confirm %}
                {{ render_field_with_errors(register_user_form.password_confirm)}}
                {% endif %}
                {{ render_field(register_user_form.submit, class="btn btn-primary") }}
            </form>
            <p>Already Signed Up? Please <a href="{{ url_for_security('login') }}">Log In</a>.</p>
        </div>
                        

    {% endblock body %}
        
    {% block scripts %}
    {{ super() }}
    <script>
        var wtf_phone_field = document.getElementById('phone');
        wtf_phone_field.style.position = 'absolute';
        wtf_phone_field.style.top = '-9999px';
        wtf_phone_field.style.left = '-9999px';
        wtf_phone_field.parentElement.insertAdjacentHTML('beforeend', '<div><input type="tel" id="_phone" class="form-control"></div>');
        var fancy_phone_field = document.getElementById('_phone');
        var fancy_phone_iti = window.intlTelInput(fancy_phone_field, {
            separateDialCode: true,
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/16.0.4/js/utils.js",
        });
        fancy_phone_iti.setNumber(wtf_phone_field.value);
        fancy_phone_field.addEventListener('blur', function() {
            wtf_phone_field.value = fancy_phone_iti.getNumber();
        });
    </script>
    {% endblock %}